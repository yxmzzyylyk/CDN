(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cc9a8c9"],{"498a":function(t,e,i){"use strict";var n=i("23e7"),a=i("58a8").trim,s=i("c8d2");n({target:"String",proto:!0,forced:s("trim")},{trim:function(){return a(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,i){var n=i("1d80"),a=i("5899"),s="["+a+"]",r=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),u=function(t){return function(e){var i=String(n(e));return 1&t&&(i=i.replace(r,"")),2&t&&(i=i.replace(l,"")),i}};t.exports={start:u(1),end:u(2),trim:u(3)}},a15b:function(t,e,i){"use strict";var n=i("23e7"),a=i("44ad"),s=i("fc6a"),r=i("a640"),l=[].join,u=a!=Object,c=r("join",",");n({target:"Array",proto:!0,forced:u||!c},{join:function(t){return l.call(s(this),void 0===t?",":t)}})},a434:function(t,e,i){"use strict";var n=i("23e7"),a=i("23cb"),s=i("a691"),r=i("50c4"),l=i("7b0b"),u=i("65f0"),c=i("8418"),o=i("1dde"),d=i("ae40"),p=o("splice"),_=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,g=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p||!_},{splice:function(t,e){var i,n,o,d,p,_,b=l(this),h=r(b.length),w=a(t,h),y=arguments.length;if(0===y?i=n=0:1===y?(i=0,n=h-w):(i=y-2,n=g(f(s(e),0),h-w)),h+i-n>m)throw TypeError(v);for(o=u(b,n),d=0;d<n;d++)p=w+d,p in b&&c(o,d,b[p]);if(o.length=n,i<n){for(d=w;d<h-n;d++)p=d+n,_=d+i,p in b?b[_]=b[p]:delete b[_];for(d=h;d>h-n+i;d--)delete b[d-1]}else if(i>n)for(d=h-n;d>w;d--)p=d+n-1,_=d+i-1,p in b?b[_]=b[p]:delete b[_];for(d=0;d<i;d++)b[d+w]=arguments[d+2];return b.length=h-n+i,o}})},b0c0:function(t,e,i){var n=i("83ab"),a=i("9bf2").f,s=Function.prototype,r=s.toString,l=/^\s*function ([^ (]*)/,u="name";n&&!(u in s)&&a(s,u,{configurable:!0,get:function(){try{return r.call(this).match(l)[1]}catch(t){return""}}})},c8d2:function(t,e,i){var n=i("d039"),a=i("5899"),s="​᠎";t.exports=function(t){return n((function(){return!!a[t]()||s[t]()!=s||a[t].name!==t}))}},c975:function(t,e,i){"use strict";var n=i("23e7"),a=i("4d64").indexOf,s=i("a640"),r=i("ae40"),l=[].indexOf,u=!!l&&1/[1].indexOf(1,-0)<0,c=s("indexOf"),o=r("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:u||!c||!o},{indexOf:function(t){return u?l.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},f2b9:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wbs-content"},[i("div",{staticClass:"wbs-main"},[i("div",{staticClass:"table-wp"},[t.is_loaded?i("table",{staticClass:"wbs-table table-border table-rule-type"},[t._m(0),i("tbody",[t._l(t.spider.url_type,(function(e,n){return i("tr",[i("td",[t._v(t._s(e))]),i("td",[t.url_type_editing==n?i("wbs-tags-module",{attrs:{tags:t.opt.extral_rule[n],placeholder:"输入规则，按回车确认"},on:{"set-tags":function(e){t.opt.extral_rule[n]=e}}}):i("div",{staticClass:"display-rule"},[i("span",{staticClass:"wb-status-tag rule"},[t._v("默认WP规则")]),t._l(t.opt.extral_rule[n].split(","),(function(e){return t.opt.extral_rule[n]?i("span",{staticClass:"wb-status-tag rule"},[t._v(t._s(e))]):t._e()}))],2)],1),i("td",{staticClass:"align-center"},[t.url_type_editing!=n?i("a",{staticClass:"link",attrs:{title:"编辑"},on:{click:function(e){t.url_type_editing=n}}},[i("svg",{staticClass:"wb-icon sico-edit"},[i("use",{attrs:{"xlink:href":"#sico-edit"}})])]):t._e(),t.url_type_editing==n?i("a",{staticClass:"link",on:{click:function(e){t.url_type_editing=-1}}},[t._v("完成编辑")]):t._e()])])})),t._l(t.opt.user_rule,(function(e,n){return i("tr",{class:{"cur-editing":t.url_type_editing==n}},[i("td",[t.url_type_editing==n?i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"v.name"}],staticClass:"wbs-input",attrs:{placeholder:"输入url类型"},domProps:{value:e.name},on:{input:function(i){i.target.composing||t.$set(e,"name",i.target.value)}}}):i("span",{staticClass:"display-value"},[t._v(t._s(e.name))])]),i("td",[t.url_type_editing==n?i("wbs-tags-module",{attrs:{tags:e.rule,placeholder:"输入规则，按回车确认"},on:{"set-tags":function(t){e.rule=t}}}):i("div",{staticClass:"display-rule"},t._l(e.rule.split(","),(function(n){return e.rule?i("span",{staticClass:"wb-status-tag rule"},[t._v(t._s(n))]):t._e()})),0)],1),i("td",{staticClass:"align-center"},[t.url_type_editing!=n?i("a",{staticClass:"link",attrs:{title:"编辑"},on:{click:function(e){t.url_type_editing=n}}},[i("svg",{staticClass:"wb-icon sico-edit"},[i("use",{attrs:{"xlink:href":"#sico-edit"}})])]):t._e(),t.url_type_editing==n?i("div",[i("a",{staticClass:"link",on:{click:function(i){return t.saveRuleItem(e)}}},[t._v("完成编辑")]),i("a",{staticClass:"button-link-delete ml",attrs:{title:"删除"},on:{click:function(e){return t.removeRule(n)}}},[t._v("删除")])]):t._e(),t.url_type_editing!=n?i("a",{staticClass:"button-link-delete",attrs:{title:"删除"},on:{click:function(e){return t.removeRule(n)}}},[i("svg",{staticClass:"wb-icon sico-del"},[i("use",{attrs:{"xlink:href":"#sico-del"}})])]):t._e()])])}))],2),i("tfoot",[i("tr",[i("td"),i("td"),i("td",[i("a",{staticClass:"button",on:{click:t.addRule}},[t._v("+ 添加定义")])])])])]):t._e()]),t._m(1)]),i("wbs-more-sources",{staticClass:"wbs-main"}),i("wbs-ctrl-bar",{on:{submit:t.update_data}})],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",{staticClass:"w30"},[t._v("类型")]),i("th",[t._v("规则")]),i("th",{staticClass:"w8em align-center"},[t._v("操作")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dl",{staticClass:"description mt"},[i("dt",[t._v("温馨提示：")]),i("dd",[t._v("支持通配符形式链接规则，如"),i("code",[t._v("/mp-api/*")])]),i("dd",[t._v("如有不同于预设的链接类型，可以通过添加自定义来新增；否则建议在预设类型基础上修改新增。")])])}],s=(i("a434"),i("b0c0"),i("365c")),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{staticClass:"wb-tags-ctrl"},[i("div",{staticClass:"tag-items"},t._l(t.taglist,(function(e,n){return t.taglist.length?i("div",{staticClass:"tag-item"},[i("span",{staticClass:"vam ib",domProps:{innerHTML:t._s(t.displayFormat(e))}}),i("a",{staticClass:"del",attrs:{"data-del-val":e},on:{click:function(e){return t.delItem(n)}}})]):t._e()})),0),i("input",{directives:[{name:"model",rawName:"v-model",value:t.cur_input,expression:"cur_input"}],staticClass:"wb-tag-input",attrs:{type:"text",placeholder:"输入选项值, 回车确认 *"},domProps:{value:t.cur_input},on:{keyup:t.wbTagInput,input:function(e){e.target.composing||(t.cur_input=e.target.value)}}})])},l=[],u=(i("c975"),i("a15b"),i("ac1f"),i("1276"),i("498a"),{name:"wbsTags",props:{tags:String,format:String},data:function(){return{cur_input:"",taglist:[],keycode:null}},created:function(){this.taglist=this.tags?this.tags.split(","):[]},methods:{wbTagInput:function(t){var e=this,i=t.keyCode;13===i&&e.wbTagPush()},wbTagPush:function(t){var e=this;return""!=e.cur_input&&(e.taglist.indexOf(e.cur_input.trim())>-1?(wbui.toast("已存在"),e.cur_input="",!1):(e.taglist.push(e.cur_input),e.$emit("set-tags",e.taglist.join(",")),e.cur_input="",!1))},delItem:function(t){var e=this;wbui.confirm("确认删除该选项？",(function(){e.taglist.splice(t,1),e.$emit("set-tags",e.taglist.join(",")),wbui.toast("已移除")}))},displayFormat:function(t){var e=t.split(":");return e.length>1?e[1]+'<em class="wk">(别名:'+e[0]+")</em>":t}},computed:{}}),c=u,o=i("2877"),d=Object(o["a"])(c,r,l,!1,null,null,null),p=d.exports,_={name:"SettingRule",components:{"wbs-tags-module":p},data:function(){var t=this;return{form_changed:0,is_loaded:0,is_pro:t.$cnf.is_pro,cnf:{spider:[],code:[],path_type:[]},spider:{type:[]},opt:{user_define:[],forbid:{},user_rule:[],extral_rule:[]},log_keep:{1:"最近30天",3:"最近3个月",6:"最近6个月",12:"最近1年",120:"永久保留"},spider_display_count:10,url_type_editing:-1}},created:function(){this.load_data()},methods:{removeRule:function(t){var e=this;wbui.confirm("确认删除？",(function(){e.opt.user_rule.splice(t,1),wbui.toast("已移除")}))},addRule:function(){var t=this;t.opt.user_rule.push({name:"",rule:""}),t.url_type_editing=t.opt.user_rule.length-1},saveRuleItem:function(t){var e=this;return""!=t.name&&""!=t.rule?e.url_type_editing=-1:wbui.toast('请填写完整的"类型"及"规则"'),!1},load_data:function(){var t=this;t.log_loading=wbui.loading(),Object(s["a"])({action:t.$cnf.action.act,op:"get_setting"}).then((function(e){wbui.close(t.log_loading),t.spider=e["data"]["spider"],t.opt=e["data"]["opt"],t.is_loaded=1}))},update_data:function(){var t=this,e={action:t.$cnf.action.act,op:"update_setting",opt:t.opt,type:t.spider.type};Object(s["b"])(e).then((function(e){wbui.toast("设置保存成功"),t.form_changed=1}))}},watch:{opt:{handler:function(){this.form_changed++},deep:!0}},beforeRouteLeave:function(t,e,i){var n=this;n.form_changed>1?wbui.confirm("您修改的设置尚未保存，确定离开此页面吗？",(function(){return i(),!1}),(function(){return i(!1),!1})):i()}},f=_,g=Object(o["a"])(f,n,a,!1,null,null,null);e["default"]=g.exports}}]);